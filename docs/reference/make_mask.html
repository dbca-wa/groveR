<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>A function to create a cloud mask from a shape file — make_mask • groveR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A function to create a cloud mask from a shape file — make_mask"><meta name="description" content="make_mask takes an input polygon shape file and converts to a raster
   mask."><meta property="og:description" content="make_mask takes an input polygon shape file and converts to a raster
   mask."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">groveR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dbca-wa/groveR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A function to create a cloud mask from a shape file</h1>
      <small class="dont-index">Source: <a href="https://github.com/dbca-wa/groveR/blob/HEAD/R/main.R" class="external-link"><code>R/main.R</code></a></small>
      <div class="d-none name"><code>make_mask.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>make_mask</code> takes an input polygon shape file and converts to a raster
   mask.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_mask</span><span class="op">(</span></span>
<span>  <span class="va">ivect</span>,</span>
<span>  <span class="va">refimage</span>,</span>
<span>  attribname <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>  loc <span class="op">=</span> <span class="st">"raster_masks/cloud_masks"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-ivect">ivect<a class="anchor" aria-label="anchor" href="#arg-ivect"></a></dt>
<dd><p>Character string of the file path and name of the input
shape file.</p></dd>


<dt id="arg-refimage">refimage<a class="anchor" aria-label="anchor" href="#arg-refimage"></a></dt>
<dd><p>Character string of the file path and name of a raster
that has the correct extent and cell size for the current analysis, e.g.
this could be one of the input rasters for <code>link{veg_dens}</code>.</p></dd>


<dt id="arg-attribname">attribname<a class="anchor" aria-label="anchor" href="#arg-attribname"></a></dt>
<dd><p>Character string of the name of the attribute column in the
shape file that gives the year that the polygon applies to. Defaults to
"year".</p></dd>


<dt id="arg-loc">loc<a class="anchor" aria-label="anchor" href="#arg-loc"></a></dt>
<dd><p>Character string of the file path to the directory where the output/s
should be written. Defaults to"raster_masks/cloud_masks" which works with
the suggested project folder structure and workflow.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>cloud masks will be written to "raster_masks/cloud_masks" unless unless
   'loc' parameter is changed, as tif files.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Input raster mosaics will inevitably contain the odd cloud or smoke
   haze that obscures regions of interest. The user should create a polygon
   shape file that identifies where the cloud is within the image as this
   identifies where we have less certainty in our analysis. The user digitises
   a polygon that surrounds the cloud and ensures that each polygon contains
   an attribute called 'year' which has a 4 digit representation of the year
   of the afflicted image.</p>
<p>On running the function it will generate a raster mask for each unique year
   it finds in the attribute table, formatting them to the exact requirements for
   use in the <code>link{cloud_mask}</code> function. Correct extents, cell sizes, CRS
   and mask values are all handled within the function.</p>
<p>Note that it is possible to use this function to create other masks, such
   as the land mask. To do this follow the instructions and then rename and
   relocate the product as required.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Bart Huntley, <a href="mailto:bart.huntley@dbca.wa.gov.au">bart.huntley@dbca.wa.gov.au</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">make_mask</span><span class="op">(</span>ivect <span class="op">=</span> <span class="st">"vectors/cloud_vectors.shp"</span>, refimage <span class="op">=</span> <span class="st">"veg_dens/LgCSMP_vdens_2018.tif"</span>,</span></span>
<span class="r-in"><span>attribname <span class="op">=</span> <span class="st">"year"</span>, loc <span class="op">=</span><span class="st">"raster_masks/cloud_masks"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bart Huntley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

