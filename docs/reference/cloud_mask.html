<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>A function to apply cloud masks to rasters. — cloud_mask • groveR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A function to apply cloud masks to rasters. — cloud_mask"><meta name="description" content="cloud_mask applies pre-generated annual cloud masks to appropriate input
    rasters and replaces values with -99."><meta property="og:description" content="cloud_mask applies pre-generated annual cloud masks to appropriate input
    rasters and replaces values with -99."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">groveR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dbca-wa/groveR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A function to apply cloud masks to rasters.</h1>
      <small class="dont-index">Source: <a href="https://github.com/dbca-wa/groveR/blob/HEAD/R/main.R" class="external-link"><code>R/main.R</code></a></small>
      <div class="d-none name"><code>cloud_mask.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>cloud_mask</code> applies pre-generated annual cloud masks to appropriate input
    rasters and replaces values with -99.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cloud_mask</span><span class="op">(</span><span class="va">irast</span>, <span class="va">imask</span>, ext <span class="op">=</span> <span class="st">".tif"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-irast">irast<a class="anchor" aria-label="anchor" href="#arg-irast"></a></dt>
<dd><p>Character file path to directory of input rasters, most commonly,
those created by <code>link{general_mask}</code> and stored at
`veg_dens_mskd/`.</p></dd>


<dt id="arg-imask">imask<a class="anchor" aria-label="anchor" href="#arg-imask"></a></dt>
<dd><p>Character file path to directory of cloud raster masks to
apply. Commonly something like "raster_masks/cloud_masks".</p></dd>


<dt id="arg-ext">ext<a class="anchor" aria-label="anchor" href="#arg-ext"></a></dt>
<dd><p>Character representation of the file extension of the input rasters.
Defaults to ".tif" as this is the preferred file type.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Any cloud masking will carried out to affected input rasters and
    these will be written to `veg_dens_mskd_cld/`. cloud masked
    areas will have a -99 value.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function applies a pre-generated mask to a single raster. These
    masks are often for things like cloud and shadow but could include something
    like a fire scar that could throw out the conversion to vegetation products.
    These circumstances are pertinent to one time step only, so the masks used
    here will be matched to the correct input by a year in the file name.</p>
<p>This function is designed to sort through a complete time series of input
    rasters and work out which need masking based on the presence of masks in
    a separate directory.</p>
<p>The function will compare any newly masked rasters to the raster of
    the year before in order to clean up masked areas that might extend over
    water for example. Masked areas in the product have a value of -99 and
    this step ensures that previously "NA" masked areas don't now have a -99
    value.</p>
<p>Masking of the very first input raster of a time series is handled without
    this step as there is no prior image to compare to. Any input raster with
    no requirement for masking is renamed and copied to the output directory.</p>
<p>It is vital that all input rasters and masks have the same extents, CRS
    and cell size and this is most easily achieved if the masks have been
    generated using <code>link{make_mask}</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Bart Huntley, <a href="mailto:bart.huntley@dbca.wa.gov.au">bart.huntley@dbca.wa.gov.au</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">cloud_mask</span><span class="op">(</span>irast <span class="op">=</span> <span class="st">"veg_dens_mskd"</span>, imask <span class="op">=</span> <span class="st">"raster_masks/cloud_masks"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bart Huntley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

